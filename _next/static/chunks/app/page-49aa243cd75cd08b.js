(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},6448:function(e,t,a){Promise.resolve().then(a.bind(a,8958))},8958:function(e,t,a){"use strict";a.d(t,{StockFinderComponent:function(){return F}});var s=a(7437),l=a(2265),r=a(166),i=a(7053),o=a(7712),n=a(1994),c=a(3335);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.m6)((0,n.W)(t))}let u=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,asChild:o=!1,...n}=e,c=o?i.g7:"button";return(0,s.jsx)(c,{className:d(u({variant:l,size:r,className:a})),ref:t,...n})});m.displayName="Button";let x=l.forwardRef((e,t)=>{let{className:a,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});x.displayName="Input";let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:d("w-full caption-bottom text-sm",a),...l})})});h.displayName="Table";let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("thead",{ref:t,className:d("[&_tr]:border-b",a),...l})});p.displayName="TableHeader";let f=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:d("[&_tr:last-child]:border-0",a),...l})});f.displayName="TableBody",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tr",{ref:t,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});g.displayName="TableRow";let b=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("th",{ref:t,className:d("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});b.displayName="TableHead";let v=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("td",{ref:t,className:d("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});v.displayName="TableCell",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("caption",{ref:t,className:d("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var y=a(1053),j=a(1594),w=a(4525),N=a(7996),k=a(2093),C=a(8614),S=a(4847);let R=e=>{let{size:t="medium"}=e;return(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full border-t-2 border-b-2 border-blue-500 ".concat({small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t])})})};var E=a(3077);a(9936);let P=(0,r.default)(()=>a.e(145).then(a.bind(a,3145)),{loadableGenerated:{webpack:()=>[3145]},ssr:!1}),T=[{name:"Salon en L",catalogue:"tissues"},{name:"Salon en U",catalogue:"tissues"},{name:"Canap\xe9 2 Places",catalogue:"tissues"},{name:"Canap\xe9 3 Places",catalogue:"tissues"},{name:"Fauteuil",catalogue:"tissues"},{name:"Chaise",catalogue:"tissues"},{name:"Table de Salle \xe0 Manger",catalogue:"ceramique"},{name:"Table Basse",catalogue:"ceramique"},{name:"Table d'Appoint",catalogue:"ceramique"},{name:"Buffet",catalogue:"ceramique"},{name:"Console",catalogue:"ceramique"},{name:"Biblioth\xe8que",catalogue:null},{name:"Lit",catalogue:"tissues"},{name:"Table de Chevet",catalogue:null},{name:"Ensemble d'Ext\xe9rieur",catalogue:"tissues"},{name:"Canap\xe9s Jardin",catalogue:"tissues"},{name:"Table Ext\xe9rieur",catalogue:null},{name:"Chaise Ext\xe9rieur",catalogue:null},{name:"Miroirs",catalogue:null},{name:"Pouf",catalogue:null},{name:"Tableaux",catalogue:null},{name:"Luminaire-Luxalight",catalogue:null},{name:"Couettes",catalogue:null},{name:"Matelas",catalogue:null},{name:"Oreillers",catalogue:null},{name:"Tapis",catalogue:null},{name:"Objets D\xe9co",catalogue:null}],L=e=>{let{value:t}=e;return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center ".concat(0===t?"bg-red-500":""),children:(0,s.jsx)("span",{className:"font-bold uppercase ".concat(0===t?"text-white":""),children:null!=t?t:0})})},A=[{accessorKey:"Ref. produit",header:"R\xe9f.",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center",children:[t.original.subProducts&&(0,s.jsx)(m,{variant:"outline",size:"sm",className:"mr-2 p-0 w-6 h-6 rounded-full",onClick:e=>{e.stopPropagation()},children:(0,s.jsx)(N.OvN,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"font-medium",children:t.original["Ref. produit"]})]})}},{accessorKey:"Libell\xe9",header:"Libell\xe9"},{accessorKey:"Total Stock",header:"Stock",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Total Stock"]})}}],z=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),K=[{accessorKey:"Ref. produit",header:e=>{let{column:t}=e;return(0,s.jsxs)(m,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"hover:bg-slate-100 text-slate-700 font-bold w-full h-full text-left justify-start",children:["R\xe9f.",(0,s.jsx)(N.tv1,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center",children:[t.original.subProducts&&(0,s.jsx)(m,{variant:"outline",size:"sm",className:"mr-2 p-0 w-6 h-6 rounded-full",onClick:e=>{e.stopPropagation(),t.toggleExpanded()},children:t.getIsExpanded()?(0,s.jsx)(N.ego,{className:"w-4 h-4"}):(0,s.jsx)(N.OvN,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"font-medium",children:t.original["Ref. produit"]})]})}},{accessorKey:"Libell\xe9",header:"Libell\xe9",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center",children:[t.original.subProductCount&&(0,s.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2 py-0.5 rounded-full",children:["+",t.original.subProductCount]}),(0,s.jsx)("span",{className:"font-medium",children:t.original["Libell\xe9"]})]})}},{accessorKey:"Total Stock",header:"STOCK TOTAL",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Total Stock"]})},meta:{className:"bg-blue-50 p-0",headerClassName:"bg-blue-100"}},{accessorKey:"Prix Promo",header:"PRIX PROMO",cell:e=>{let{row:t}=e,a=parseFloat(t.original["Prix Promo"].toString());return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center font-bold uppercase",children:z(Math.round(a))})},meta:{className:"bg-green-50 p-0",headerClassName:"bg-green-100"}},{accessorKey:"Stock Frimoda",header:"STOCK SKE",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Stock Frimoda"]})},meta:{className:"p-0"}},{accessorKey:"Stock Casa",header:"Stock Casa",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Stock Casa"]})},meta:{className:"p-0"}},{accessorKey:"Stock Rabat",header:"Stock Rabat",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Stock Rabat"]})},meta:{className:"p-0"}},{accessorKey:"Stock Marrakech",header:"Stock Marrakech",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Stock Marrakech"]})},meta:{className:"p-0"}},{accessorKey:"Stock Tanger",header:"Stock Tanger",cell:e=>{let{row:t}=e;return(0,s.jsx)(L,{value:t.original["Stock Tanger"]})},meta:{className:"p-0"}}],O=async e=>{try{var t;let a=await fetch("https://docs.google.com/spreadsheets/d/1mWNxfuTYDho--Z5qCzvBErN2w0ZNBelND6rdzPAyC90/gviz/tq?tqx=out:json"),s=await a.text(),l=JSON.parse(s.substr(47).slice(0,-2)).table.rows.find(t=>{var a;return(null===(a=t.c[3])||void 0===a?void 0:a.v)===e});return l&&(null===(t=l.c[7])||void 0===t?void 0:t.v)||null}catch(e){return console.error("Error fetching product image:",e),null}},U=(e,t)=>{let a=e.imageUrl||"https://via.placeholder.com/400x300?text=No+Image";if((null==t?void 0:t.catalogue)==="tissues"){let t=e["Ref. produit"],s="https://sketch-design.ma/wp-content/uploads/2024/10/Layer-0.png";if(t.endsWith("-D"))return{mainSrc:a,smallSrc:s,label:"Droitier"};if(t.endsWith("-G"))return{mainSrc:a,smallSrc:s,label:"Gauchier"}}else if((null==t?void 0:t.catalogue)==="ceramique")return{mainSrc:a,isCeramic:!0};return{mainSrc:a}},D=e=>{let t=new Map;return e.forEach(e=>{let a=t.get(e.Libellé)||[];a.push(e),t.set(e.Libellé,a)}),Array.from(t.values()).map(e=>{e.sort((e,t)=>e["Ref. produit"].length-t["Ref. produit"].length);let t={...e[0]};return e.length>1&&(t.subProducts=e.slice(1),t.subProductCount=e.length-1,["Total Stock","Stock Frimoda","Stock Casa","Stock Rabat","Stock Marrakech","Stock Tanger"].forEach(a=>{t[a]=e.reduce((e,t)=>e+(Number(t[a])||0),0)})),t})};function F(){var e,t;let[a,r]=(0,l.useState)(T[0].name),[i,o]=(0,l.useState)(""),[n,c]=(0,l.useState)([]),[d,u]=(0,l.useState)(!1),[L,z]=(0,l.useState)(null),[F,q]=(0,l.useState)([]),[M,B]=(0,l.useState)([]),_=(0,l.useRef)(null),[I,V]=(0,l.useState)(""),[J,G]=(0,l.useState)([]),[H,W]=(0,l.useState)(null),[Y,X]=(0,l.useState)([]),[Q,Z]=(0,l.useState)({}),[$,ee]=(0,l.useState)({}),[et,ea]=(0,l.useState)(0),[es,el]=(0,l.useState)(0),[er,ei]=(0,l.useState)(0),[eo,en]=(0,l.useState)(null),[ec,ed]=(0,l.useState)(null),[eu,em]=(0,l.useState)(!1),[ex,eh]=(0,l.useState)(!1),[ep,ef]=(0,l.useState)(!1),eg=(0,l.useRef)(null),eb=async(e,t)=>{try{let a=await fetch("https://stockfinder.sketchdesign.ma/data.php?type=".concat(e,"&query=").concat(encodeURIComponent(t)));if(!a.ok)throw Error("Network response was not ok");let s=await a.json();if(console.log("Received data:",s),Array.isArray(s)){let e=s.map(e=>({...e,"Ref. produit":e["Ref. produit"]||e.ref||e["Ref produit"]||""}));q(e),B(e)}else s.error&&(console.error("API Error:",s.error),q([]),B([]))}catch(e){console.error("Fetch error:",e),q([]),B([])}};(0,l.useEffect)(()=>{eb("category",a)},[a]),(0,l.useEffect)(()=>{if(i){let e=i.toLowerCase(),t=D(F.filter(t=>t["Ref. produit"].toLowerCase().includes(e)||t["Libell\xe9"].toLowerCase().includes(e)));X(t),B(t)}else{let e=D(F);X(e),B(e)}},[i,F]),(0,l.useEffect)(()=>{X(D(M))},[M]);let ev=(0,l.useCallback)(e=>e&&e.column.columnDef.cell&&"function"==typeof e.column.columnDef.cell?(0,j.ie)(e.column.columnDef.cell,e):null,[]),ey=(0,j.b7)({data:Y,columns:K,getCoreRowModel:(0,w.sC)(),onSortingChange:c,getSortedRowModel:(0,w.tj)(),getExpandedRowModel:(0,w.rV)(),onExpandedChange:e=>{Z(t=>"function"==typeof e?e(t):e)},state:{sorting:n,expanded:Q}});(0,l.useEffect)(()=>{let e=e=>{_.current&&!_.current.contains(e.target)&&u(!1)};return d&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let ej=T.find(e=>e.name===a),ew=async(e,t)=>{try{let a=await fetch("https://docs.google.com/spreadsheets/d/".concat(e,"/gviz/tq?tqx=out:json")),s=await a.text(),l=JSON.parse(s.substr(47).slice(0,-2)).table.rows.slice(1).map(e=>{var a,s,l,r,i,o,n,c,d,u,m,x;return t?{ref:(null===(s=e.c[0])||void 0===s?void 0:null===(a=s.v)||void 0===a?void 0:a.toString())||"","image url":(null===(r=e.c[1])||void 0===r?void 0:null===(l=r.v)||void 0===l?void 0:l.toString())||"",availability:(null===(i=e.c[2])||void 0===i?void 0:i.v)==="yes"?"yes":"no"}:{ref:(null===(n=e.c[0])||void 0===n?void 0:null===(o=n.v)||void 0===o?void 0:o.toString())||"",color:(null===(d=e.c[1])||void 0===d?void 0:null===(c=d.v)||void 0===c?void 0:c.toString())||"","image url":(null===(m=e.c[2])||void 0===m?void 0:null===(u=m.v)||void 0===u?void 0:u.toString())||"",availability:(null===(x=e.c[3])||void 0===x?void 0:x.v)==="yes"?"yes":"no"}});console.log("Parsed ".concat(t?"tissue":"ceramic"," catalogue items:"),l),G(l)}catch(e){console.error("Error fetching catalogue data:",e)}};(0,l.useEffect)(()=>{(null==ej?void 0:ej.catalogue)==="ceramique"?ew("1VJs3bTDNFpdw88j5XYXxbiakzT2r5yuu4yRi7FjozSQ",!1).then(()=>console.log("Ceramic catalogue items after fetch:",J)):(null==ej?void 0:ej.catalogue)==="tissues"&&ew("1J9-7o_xOC2g-aLJfBdYru5qMh4UbOztgWSdjaeRtnX8",!0).then(()=>console.log("Tissue catalogue items after fetch:",J))},[ej,J]);let eN=e=>{let t=e.toLowerCase();return(null==ej?void 0:ej.catalogue)==="ceramique"?J.find(e=>{let a=e.ref.toLowerCase();return t.includes(a)}):J.find(e=>t.includes(e.ref.toLowerCase()))},ek=J.filter(e=>e.ref.toLowerCase().includes(I.toLowerCase())||e.color&&e.color.toLowerCase().includes(I.toLowerCase())),eC=l.memo(e=>{let{item:t}=e;return(0,s.jsx)("div",{className:"w-24 h-24 flex-shrink-0 cursor-pointer overflow-hidden rounded-md shadow-sm transition-all duration-300 hover:shadow-md group mx-1",onClick:()=>{eh(!0),W(t),setTimeout(()=>eh(!1),100)},children:(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)(P,{src:t["image url"],alt:t.ref,layout:"fill",objectFit:"cover",className:"transition-transform duration-300 group-hover:scale-110"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity duration-300"}),(0,s.jsx)("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black to-transparent p-1",children:(0,s.jsx)("p",{className:"text-[10px] font-medium text-white truncate",children:t.color||t.ref})}),(0,s.jsx)("div",{className:"absolute top-1 right-1",children:(0,s.jsx)("span",{className:"text-[8px] font-medium px-1 py-0.5 rounded-sm shadow ".concat("yes"===t.availability?"bg-green-500 text-white":"bg-red-500 text-white"),children:"yes"===t.availability?"EN STOCK":"\xc9PUIS\xc9"})})]})})});eC.displayName="CatalogueItem";let eS=e=>{let t=e["Libell\xe9"].replace(/,/g,"").trim(),s=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),l=s(t),r=T.find(e=>e.name===a);if(!r)return{productName:t,category:"",dimensions:""};let i="",o=t,n="";if(r.name.startsWith("Canap\xe9")){let e=l.indexOf("canape");-1!==e&&(i="Canap\xe9",o=t.slice(0,e).trim(),n=t.slice(e+6).trim())}else if("Miroirs"===r.name){let e=l.indexOf("miroir");-1!==e&&(i="Miroirs",o=t.slice(0,e).trim(),n=t.slice(e+6).trim())}else{let e=s(r.name);if(l.includes(e)){i=r.name;let a=l.indexOf(e);o=t.slice(0,a).trim(),n=t.slice(a+r.name.length).trim()}}return{productName:o.trim(),category:i.trim(),dimensions:n.trim()}},eR=async e=>{if(e){ef(!0),em(!0);try{let{productName:t,category:a,dimensions:s}=eS(e),l=await O(e["Ref. produit"]);z({...e,processedName:t,processedCategory:a,processedDimensions:s,imageUrl:l||void 0})}catch(e){console.error("Error setting selected product:",e)}finally{em(!1)}}else z(null),ef(!1)},eE=()=>{ef(!1),z(null)},eP=()=>{W(null),eh(!1)};function eT(e){return"accessorKey"in e}let eL=(0,l.useCallback)(e=>{let t={};e.forEach(e=>{let a=e["Cat\xe9gorie"]||"Uncategorized";t[a]=(t[a]||0)+1}),ee(t)},[]);(0,l.useEffect)(()=>{eL(F)},[F,eL]),(0,l.useEffect)(()=>{let e=M.filter(e=>e["Total Stock"]>0).length,t=M.filter(e=>e["Total Stock"]<=0).length,a=M.length;ea(e),el(t),ei(a)},[M]);let eA=e=>{e.stopPropagation(),en(null)};return(0,l.useEffect)(()=>{L&&(()=>{if(eg.current&&L){let e=20;for(eg.current.style.fontSize="".concat(e,"px");eg.current.scrollHeight>eg.current.clientHeight&&e>10;)e--,eg.current.style.fontSize="".concat(e,"px")}})()},[L]),(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100 font-sans uppercase",children:[(0,s.jsxs)("div",{ref:_,className:"fixed inset-y-0 left-0 z-50 w-48 bg-[#0156B3] text-white shadow-lg transform ".concat(d?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 flex flex-col"),children:[(0,s.jsx)("div",{className:"bg-[#0156B3] z-20 p-3 shadow-md",children:(0,s.jsx)(P,{src:"https://stockfinder.sketchdesign.ma/sketch.svg",alt:"Stock Finder Logo",width:120,height:40,className:"w-full h-auto"})}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto py-2 px-1",children:T.map(e=>(0,s.jsxs)(m,{variant:a===e.name?"secondary":"ghost",className:"w-full justify-between mb-1 text-left hover:bg-white hover:text-[#0156B3] transition-colors duration-300 text-[11px] py-1 px-2 rounded-md font-bold",onClick:()=>{r(e.name),u(!1)},children:[(0,s.jsx)("span",{children:e.name.toUpperCase()}),void 0!==$[e.name]&&(0,s.jsx)("span",{className:"bg-white text-[#0156B3] text-[9px] px-1.5 py-0.5 rounded-full",children:$[e.name]})]},e.name))})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[(0,s.jsx)("div",{className:"lg:hidden bg-[#0156B3] text-white px-2 sm:px-4 py-2 sm:py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m,{variant:"ghost",size:"icon",onClick:()=>u(!d),className:"text-white p-1",children:(0,s.jsx)(N.cur,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,s.jsx)("h1",{className:"text-xs sm:text-sm font-bold truncate max-w-[120px] sm:max-w-[160px]",children:a.toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-green-500 text-white rounded-full whitespace-nowrap text-[8px] sm:text-[10px]",children:["En stock: ",et]}),(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-red-500 text-white rounded-full whitespace-nowrap text-[8px] sm:text-[10px]",children:["En rupture: ",es]}),(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-800 rounded-full whitespace-nowrap text-[8px] sm:text-[10px]",children:["Total: ",er]})]})]})}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[(null==ej?void 0:ej.catalogue)&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700 whitespace-nowrap",children:"tissues"===ej.catalogue?"TISSUS":"C\xc9RAMIQUES"}),(0,s.jsxs)("div",{className:"relative w-full sm:w-64",children:[(0,s.jsx)(x,{type:"text",placeholder:"Recherche r\xe9f/couleur",value:I,onChange:e=>V(e.target.value),className:"w-full pl-8 pr-3 py-2 text-sm transition-shadow duration-300 focus:shadow-md rounded-full"}),(0,s.jsx)(N.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16})]})]}),(0,s.jsx)(E.lS,{children:ek.map((e,t)=>(0,s.jsx)(eC,{item:e},e.ref+t))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg",children:[(0,s.jsx)("div",{className:"bg-white rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center sm:items-start sm:space-y-0 p-2",children:[(0,s.jsxs)("div",{className:"hidden lg:flex flex-wrap gap-2 text-[11px] mb-2 sm:mb-0",children:[(0,s.jsxs)("span",{className:"px-2 py-1 bg-green-500 text-white rounded-full whitespace-nowrap",children:["En stock: ",et]}),(0,s.jsxs)("span",{className:"px-2 py-1 bg-red-500 text-white rounded-full whitespace-nowrap",children:["En rupture: ",es]}),(0,s.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full whitespace-nowrap",children:["Total produits: ",er]})]}),(0,s.jsxs)("div",{className:"flex w-full sm:w-auto items-center space-x-2",children:[(0,s.jsxs)("div",{className:"relative flex-grow sm:flex-grow-0 sm:w-64",children:[(0,s.jsx)(x,{type:"text",placeholder:"Search by R\xe9f. or Libell\xe9",className:"pl-10 pr-4 py-2 w-full transition-shadow duration-300 focus:shadow-md",value:i,onChange:e=>o(e.target.value)}),(0,s.jsx)(N.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),(0,s.jsxs)(m,{onClick:()=>{let e=k.P6.json_to_sheet(M),t=k.P6.book_new();k.P6.book_append_sheet(t,e,"Products"),k.NC(t,"stock_finder_export.xlsx")},className:"hidden sm:flex bg-[#0156B3] hover:bg-[#0167D3] text-white transition-colors duration-300 font-bold",children:[(0,s.jsx)(N._hL,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)(h,{className:"hidden lg:table w-full text-xs",children:[(0,s.jsx)(p,{className:"bg-gray-200",children:ey.getHeaderGroups().map(e=>(0,s.jsx)(g,{children:e.headers.map(e=>{var t;return(0,s.jsx)(b,{className:"font-bold ".concat(0===e.index||1===e.index?"text-left":"text-center"," ").concat((null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.headerClassName)||""),children:e.isPlaceholder?null:(0,j.ie)(e.column.columnDef.header,e.getContext())},e.id)})},e.id))}),(0,s.jsx)(f,{children:ey.getRowModel().rows.map(e=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(g,{className:"".concat(e.index%2==0?"bg-white":"bg-gray-100"," hover:bg-blue-50 transition-all duration-200 ").concat(e.getIsExpanded()?"bg-blue-100 shadow-md z-10 relative":""),children:e.getVisibleCells().map(t=>{var a,l;return(0,s.jsx)(v,{className:"".concat((null===(a=t.column.columnDef.meta)||void 0===a?void 0:a.className)||""," ").concat((null===(l=t.column.id)||void 0===l?void 0:l.startsWith("Stock"))?"border-l border-gray-200":""),children:(0,s.jsx)("div",{className:"".concat("Ref. produit"===t.column.id?"text-left":"text-center cursor-pointer"),onClick:()=>{"Ref. produit"!==t.column.id&&eR(e.original)},children:t.column.columnDef.cell?ev(t.getContext()):null})},t.id)})}),e.getIsExpanded()&&e.original.subProducts&&e.original.subProducts.map((t,a)=>{var l,r;return(0,s.jsx)(g,{className:"bg-blue-50 hover:bg-blue-200 transition-colors duration-200 cursor-pointer ".concat(a===(null!==(r=null===(l=e.original.subProducts)||void 0===l?void 0:l.length)&&void 0!==r?r:0)-1?"shadow-md":""),onClick:()=>eR(t),children:K.map((e,l)=>{var r,i;return(0,s.jsx)(v,{className:"".concat(0===l?"text-left":"text-center"," ").concat((null===(r=e.meta)||void 0===r?void 0:r.className)||""," ").concat((null===(i=e.id)||void 0===i?void 0:i.startsWith("Stock"))?"border-l border-gray-200":""),children:(0,s.jsx)("div",{className:"".concat(0===l?"pl-6":""),children:0===l?(0,s.jsxs)("span",{className:"text-xs text-blue-600",children:["└ ",t["Ref. produit"]]}):e.cell&&"function"==typeof e.cell?(0,j.ie)(e.cell,{getValue:()=>eT(e)?t[e.accessorKey]:void 0,renderValue:()=>eT(e)?t[e.accessorKey]:void 0,row:{original:t,index:a,id:t["Ref. produit"],depth:1,subRows:[]},column:e,table:ey}):null})},e.id)})},t["Ref. produit"])})]},e.id))})]}),(0,s.jsxs)(h,{className:"lg:hidden w-full text-xs",children:[(0,s.jsx)(p,{children:(0,s.jsx)(g,{children:A.map(e=>(0,s.jsx)(b,{className:"font-bold text-left",children:e.header},e.accessorKey))})}),(0,s.jsx)(f,{children:Y.map((e,t)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(g,{className:"".concat(t%2==0?"bg-white":"bg-gray-100"," hover:bg-blue-50 transition-all duration-200 cursor-pointer"),onClick:()=>eR(e),children:A.map(t=>(0,s.jsx)(v,{children:"Ref. produit"===t.accessorKey?(0,s.jsxs)("div",{className:"flex items-center",children:[e.subProducts&&(0,s.jsx)(m,{variant:"outline",size:"sm",className:"mr-2 p-0 w-6 h-6 rounded-full",onClick:t=>{t.stopPropagation(),Z(t=>({...t,[e["Ref. produit"]]:!t[e["Ref. produit"]]}))},children:Q[e["Ref. produit"]]?(0,s.jsx)(N.ego,{className:"w-4 h-4"}):(0,s.jsx)(N.OvN,{className:"w-4 h-4"})}),(0,s.jsx)("span",{children:e[t.accessorKey]})]}):t.cell?t.cell({row:{original:e}}):e[t.accessorKey]},t.accessorKey))}),Q[e["Ref. produit"]]&&e.subProducts&&e.subProducts.map((e,a)=>(0,s.jsx)(g,{className:"".concat((t+a+1)%2==0?"bg-blue-50":"bg-blue-100"," hover:bg-blue-200 transition-colors duration-200 cursor-pointer"),onClick:()=>eR(e),children:A.map(t=>(0,s.jsx)(v,{className:"pl-6",children:t.cell?t.cell({row:{original:e}}):e[t.accessorKey]},t.accessorKey))},e["Ref. produit"]))]},e["Ref. produit"]))})]})]})]})]})]}),(0,s.jsx)(y.fC,{open:ep,onOpenChange:eE,children:(0,s.jsxs)(y.h_,{children:[(0,s.jsx)(y.aV,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),(0,s.jsx)(C.M,{children:ep&&(0,s.jsx)(y.VY,{className:"fixed inset-0 flex items-center justify-center z-[60]",onClick:eE,children:(0,s.jsxs)(S.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-2xl w-[95vw] sm:w-[90vw] max-w-[450px] overflow-hidden flex flex-col max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[eu?(0,s.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,s.jsx)(R,{size:"large"})}):L?(0,s.jsxs)("div",{className:"product-modal-content relative flex-grow flex flex-col overflow-auto",children:[(0,s.jsx)(y.Dx,{className:"sr-only",children:"Product Details"}),(0,s.jsx)(y.dk,{className:"sr-only",children:"Detailed information about the selected product"}),(0,s.jsxs)("div",{className:"bg-blue-600 p-4 rounded-t-2xl",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-between mb-2",children:(0,s.jsxs)("div",{className:"flex-grow flex items-center space-x-2 mr-8",children:[" ",(0,s.jsx)(S.E.h2,{className:"text-2xl font-bold text-white truncate",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:null===(e=L.processedName)||void 0===e?void 0:e.toUpperCase()}),L.processedDimensions&&(0,s.jsx)(S.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,s.jsx)("div",{className:"bg-[#ffed00] py-1 px-2 transform skew-x-[-20deg] shadow-lg",children:(0,s.jsx)("p",{className:"text-sm font-bold text-black transform skew-x-[20deg] inline-block",children:L.processedDimensions.toUpperCase()})})})]})}),(0,s.jsxs)(S.E.div,{className:"flex items-center gap-2 mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[(0,s.jsx)("span",{className:"text-sm text-blue-100",children:(null===(t=L["Ref. produit"])||void 0===t?void 0:t.toUpperCase())||"N/A"}),L.processedCategory&&(0,s.jsx)("span",{className:"inline-block bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:L.processedCategory.toUpperCase()})]})]}),(0,s.jsxs)("div",{className:"relative h-64 bg-white",children:[(0,s.jsx)(P,{src:L.imageUrl||"https://via.placeholder.com/400x300?text=No+Image",alt:L["Libell\xe9"],layout:"fill",objectFit:"contain",className:"rounded-t-2xl",quality:75,placeholder:"blur",blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="}),(0,s.jsx)(S.E.div,{className:"absolute bottom-4 right-4 overflow-visible z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,s.jsx)("div",{className:"bg-[#ffed00] py-1 px-4 transform skew-x-[-20deg] shadow-lg",children:(0,s.jsxs)("p",{className:"text-xl font-bold text-black transform skew-x-[20deg] inline-block",children:[L["Prix Promo"].toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," ",(0,s.jsx)("span",{className:"text-xl",children:"DH"})]})})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-4 bg-blue-50",children:[(()=>{let{smallSrc:e,label:t,isCeramic:a}=U(L,ej),l=eN(L["Ref. produit"]);return(0,s.jsxs)("div",{className:"space-y-3",children:[t&&(0,s.jsxs)(S.E.div,{className:"bg-blue-100 p-3 rounded-lg flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring"},children:[(0,s.jsx)("span",{className:"text-base font-semibold text-blue-700",children:"Orientation:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(S.E.span,{className:"text-base font-bold px-3 py-1 rounded-full ".concat("Gauchier"===t?"bg-purple-500 text-white":"bg-orange-500 text-white"),whileHover:{scale:1.05},whileTap:{scale:.95},children:t}),e&&(0,s.jsx)(S.E.div,{className:"w-14 h-14 relative",whileHover:{scale:1.1},transition:{duration:.3},children:(0,s.jsx)(P,{src:e,alt:"Orientation Image",layout:"fill",objectFit:"contain",style:{transform:"Gauchier"===t?"scaleX(-1)":void 0}})})]})]}),l&&(0,s.jsxs)("div",{className:"bg-blue-100 p-3 rounded-lg flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-base font-semibold text-blue-700",children:[a?"C\xe9ramique":"Tissu",":"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 relative cursor-pointer",onClick:()=>ed({src:l["image url"],alt:l.color||l.ref}),children:(0,s.jsx)(P,{src:l["image url"],alt:l.color||l.ref,layout:"fill",objectFit:"cover",className:"rounded-md"})}),(0,s.jsx)("span",{className:"text-base font-bold text-blue-600",children:l.color||l.ref}),!a&&(0,s.jsx)("span",{className:"text-sm font-bold px-2 py-1 rounded-full ".concat("yes"===l.availability?"bg-green-500 text-white":"bg-red-500 text-white"),children:"yes"===l.availability?"EN STOCK":"\xc9PUIS\xc9"})]})]})]})})(),(0,s.jsxs)("div",{className:"bg-blue-100 p-3 rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)(S.E.div,{className:"bg-blue-600 p-2 rounded-lg mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:0,type:"spring"},children:[(0,s.jsx)("p",{className:"text-sm font-bold text-blue-100 text-center uppercase",children:"SKE"}),(0,s.jsx)("p",{className:"text-xl font-bold text-white text-center",children:L["Stock Frimoda"]})]}),(0,s.jsx)("div",{className:"flex justify-between items-stretch space-x-2",children:[{city:"Casa",color:"bg-teal-500"},{city:"Rabat",color:"bg-amber-500"},{city:"Marrakech",color:"bg-rose-500"},{city:"Tanger",color:"bg-indigo-500"}].map((e,t)=>{let{city:a,color:l}=e,r=L["Stock ".concat(a)],i=0===r;return(0,s.jsxs)(S.E.div,{className:"".concat(l," ").concat(i?"opacity-50":""," p-2 rounded-lg flex-grow flex flex-col justify-between relative overflow-hidden"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:(t+1)*.1,type:"spring"},children:[(0,s.jsx)("p",{className:"text-xs font-bold text-white text-center uppercase",children:a}),(0,s.jsx)("p",{className:"text-xl font-bold text-center text-white uppercase",children:"number"==typeof r?r:""})]},a)})})]})]})]}):null,(0,s.jsx)(y.x8,{asChild:!0,children:(0,s.jsx)(m,{className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full transition-colors duration-200",variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),eE()},children:(0,s.jsx)(N.q5L,{className:"h-6 w-6"})})}),ec&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-10",onClick:()=>ed(null),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(P,{src:ec.src,alt:ec.alt,width:300,height:300,objectFit:"cover",className:"rounded-lg"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),ed(null)},className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-1 transition-colors duration-200",children:(0,s.jsx)(N.q5L,{className:"h-4 w-4"})})]})})]})})})]})}),(0,s.jsx)(y.fC,{open:!!H,onOpenChange:eP,children:(0,s.jsxs)(y.h_,{children:[(0,s.jsx)(y.aV,{className:"fixed inset-0 bg-black/50 opacity-0 data-[state=open]:opacity-100 transition-opacity duration-300 z-50"}),(0,s.jsx)(C.M,{children:H&&(0,s.jsx)(y.VY,{className:"fixed inset-0 flex items-center justify-center z-[60]",onClick:eP,children:(0,s.jsxs)(S.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-white rounded-lg shadow-lg w-[90vw] sm:w-[400px] md:w-[500px] lg:w-[600px] h-[80vh] sm:h-[90vh] max-h-[600px] overflow-hidden flex flex-col relative",onClick:e=>e.stopPropagation(),children:[ex?(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsx)(R,{size:"large"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative flex-grow",children:(0,s.jsx)(P,{src:H["image url"],alt:H.ref,layout:"fill",objectFit:"cover",className:"z-0"})}),(0,s.jsxs)("div",{className:"bg-white bg-opacity-90 p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center z-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:H.color?H.color.toUpperCase():H.ref.toUpperCase()}),H.color&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:H.ref.toUpperCase()})]}),(0,s.jsx)("span",{className:"mt-2 sm:mt-0 px-3 py-1 rounded-full text-sm font-semibold ".concat("yes"===H.availability?"bg-green-500 text-white":"bg-red-500 text-white"),children:"yes"===H.availability?"EN STOCK":"\xc9PUIS\xc9"})]})]}),(0,s.jsx)(y.x8,{asChild:!0,children:(0,s.jsx)(m,{className:"absolute top-2 right-2 bg-white/50 hover:bg-white/70 text-gray-800 z-20",variant:"ghost",size:"icon",children:(0,s.jsx)(N.q5L,{className:"h-4 w-4"})})})]})})})]})}),(0,s.jsx)(C.M,{children:eo&&(0,s.jsx)(S.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:eA,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] flex items-center justify-center",children:(0,s.jsxs)(S.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-lg p-2 shadow-xl relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(P,{src:eo.src,alt:eo.alt,width:300,height:300,objectFit:"cover",className:"rounded-lg"}),(0,s.jsx)("button",{onClick:eA,className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-1 transition-colors duration-200",children:(0,s.jsx)(N.q5L,{className:"h-4 w-4"})})]})})})]})}}},function(e){e.O(0,[850,425,956,164,971,117,744],function(){return e(e.s=6448)}),_N_E=e.O()}]);