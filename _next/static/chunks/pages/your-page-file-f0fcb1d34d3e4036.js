(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{7209:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/your-page-file",function(){return a(9613)}])},9613:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return H}});var s=a(5893),l=a(726),r=a.n(l),i=a(7294),n=a(5152),o=a.n(n),c=a(8426),d=a(5139),u=a(512),m=a(8388);function x(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,m.m6)((0,u.W)(t))}let p=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),h=i.forwardRef((e,t)=>{let{className:a,variant:l,size:r,asChild:i=!1,...n}=e,o=i?c.g7:"button";return(0,s.jsx)(o,{className:x(p({variant:l,size:r,className:a})),ref:t,...n})});h.displayName="Button";let f=i.forwardRef((e,t)=>{let{className:a,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:x("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});f.displayName="Input";let g=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:x("w-full caption-bottom text-sm",a),...l})})});g.displayName="Table";let b=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("thead",{ref:t,className:x("[&_tr]:border-b",a),...l})});b.displayName="TableHeader";let v=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:x("[&_tr:last-child]:border-0",a),...l})});v.displayName="TableBody",i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:x("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let y=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tr",{ref:t,className:x("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});y.displayName="TableRow";let j=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("th",{ref:t,className:x("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});j.displayName="TableHead";let w=i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("td",{ref:t,className:x("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...l})});w.displayName="TableCell",i.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("caption",{ref:t,className:x("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var N=a(9771),k=a(4094),C=a(7060),S=a(192),R=a(4105),E=a(3114),z=a(9679);let P=e=>{let{size:t="medium"}=e;return(0,s.jsx)("div",{className:"flex justify-center items-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full border-t-2 border-b-2 border-blue-500 ".concat({small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t])})})};var T=a(9398),L=a(1193),A=a.n(L);let D=o()(()=>a.e(675).then(a.t.bind(a,5675,23)),{loadableGenerated:{webpack:()=>[5675]},ssr:!1}),F=[{name:"Salon en L",catalogue:"tissues"},{name:"Salon en U",catalogue:"tissues"},{name:"Canap\xe9 2 Places",catalogue:"tissues"},{name:"Canap 3 Places",catalogue:"tissues"},{name:"Fauteuil",catalogue:"tissues"},{name:"Chaise",catalogue:"tissues"},{name:"Table de Salle \xe0 Manger",catalogue:"ceramique"},{name:"Table Basse",catalogue:"ceramique"},{name:"Table d'Appoint",catalogue:"ceramique"},{name:"Buffet",catalogue:"ceramique"},{name:"Console",catalogue:"ceramique"},{name:"Biblioth\xe8que",catalogue:null},{name:"Lit",catalogue:"tissues"},{name:"Table de Chevet",catalogue:null},{name:"Ensemble d'Ext\xe9rieur",catalogue:"tissues"},{name:"Table Ext\xe9rieur",catalogue:null},{name:"Chaise Ext\xe9rieur",catalogue:null},{name:"Miroirs",catalogue:null},{name:"Pouf",catalogue:null},{name:"Tableaux",catalogue:null},{name:"Luminaire-Luxalight",catalogue:null},{name:"Couettes",catalogue:null},{name:"Matelas",catalogue:null},{name:"Oreillers",catalogue:null},{name:"Tapis",catalogue:null},{name:"Objets D\xe9co",catalogue:null}],K=e=>{let{value:t}=e;return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center ".concat(0===t?"bg-red-500":""),children:(0,s.jsx)("span",{className:"font-bold uppercase ".concat(0===t?"text-white":""),children:null!=t?t:0})})},O=[{accessorKey:"Ref. produit",header:"R\xe9f.",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center",children:[t.original.subProducts&&(0,s.jsx)(h,{variant:"outline",size:"sm",className:"mr-2 p-0 w-6 h-6 rounded-full",onClick:e=>{e.stopPropagation()},children:(0,s.jsx)(S.OvN,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"font-medium",children:t.original["Ref. produit"]})]})}},{accessorKey:"Libell\xe9",header:"Libell\xe9"},{accessorKey:"Total Stock",header:"Stock",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Total Stock"]})}}],_=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),U=[{accessorKey:"Ref. produit",header:e=>{let{column:t}=e;return(0,s.jsxs)(h,{variant:"ghost",onClick:()=>t.toggleSorting("asc"===t.getIsSorted()),className:"hover:bg-slate-100 text-slate-700 font-bold w-full h-full text-left justify-start",children:["R\xe9f.",(0,s.jsx)(S.tv1,{className:"ml-2 h-4 w-4"})]})},cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center",children:[t.original.subProducts&&(0,s.jsx)(h,{variant:"outline",size:"sm",className:"mr-2 p-0 w-6 h-6 rounded-full",onClick:e=>{e.stopPropagation(),t.toggleExpanded()},children:t.getIsExpanded()?(0,s.jsx)(S.ego,{className:"w-4 h-4"}):(0,s.jsx)(S.OvN,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"font-medium",children:t.original["Ref. produit"]})]})}},{accessorKey:"Libell\xe9",header:"Libell\xe9",cell:e=>{let{row:t}=e;return(0,s.jsxs)("div",{className:"flex items-center",children:[t.original.subProductCount&&(0,s.jsxs)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2 py-0.5 rounded-full",children:["+",t.original.subProductCount]}),(0,s.jsx)("span",{className:"font-medium",children:t.original["Libell\xe9"]})]})}},{accessorKey:"Total Stock",header:"STOCK TOTAL",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Total Stock"]})},meta:{className:"bg-blue-50 p-0",headerClassName:"bg-blue-100"}},{accessorKey:"Prix Promo",header:"PRIX PROMO",cell:e=>{let{row:t}=e,a=parseFloat(t.original["Prix Promo"].toString());return(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center font-bold uppercase",children:_(Math.round(a))})},meta:{className:"bg-green-50 p-0",headerClassName:"bg-green-100"}},{accessorKey:"Stock Frimoda",header:"STOCK SKE",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Stock Frimoda"]})},meta:{className:"p-0"}},{accessorKey:"Stock Casa",header:"Stock Casa",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Stock Casa"]})},meta:{className:"p-0"}},{accessorKey:"Stock Rabat",header:"Stock Rabat",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Stock Rabat"]})},meta:{className:"p-0"}},{accessorKey:"Stock Marrakech",header:"Stock Marrakech",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Stock Marrakech"]})},meta:{className:"p-0"}},{accessorKey:"Stock Tanger",header:"Stock Tanger",cell:e=>{let{row:t}=e;return(0,s.jsx)(K,{value:t.original["Stock Tanger"]})},meta:{className:"p-0"}}],M=async e=>{try{var t;let a=await fetch("https://docs.google.com/spreadsheets/d/1mWNxfuTYDho--Z5qCzvBErN2w0ZNBelND6rdzPAyC90/gviz/tq?tqx=out:json"),s=await a.text(),l=JSON.parse(s.substr(47).slice(0,-2)).table.rows.find(t=>{var a;return(null===(a=t.c[3])||void 0===a?void 0:a.v)===e});return l&&(null===(t=l.c[7])||void 0===t?void 0:t.v)||null}catch(e){return console.error("Error fetching product image:",e),null}},q=(e,t)=>{let a=e.imageUrl||"https://via.placeholder.com/400x300?text=No+Image";if((null==t?void 0:t.catalogue)==="tissues"){let t=e["Ref. produit"],s="https://sketch-design.ma/wp-content/uploads/2024/10/Layer-0.png";if(t.endsWith("-D"))return{mainSrc:a,smallSrc:s,label:"Droitier"};if(t.endsWith("-G"))return{mainSrc:a,smallSrc:s,label:"Gauchier"}}else if((null==t?void 0:t.catalogue)==="ceramique")return{mainSrc:a,isCeramic:!0};return{mainSrc:a}},B=e=>{let t=new Map;return e.forEach(e=>{let a=t.get(e.Libellé)||[];a.push(e),t.set(e.Libellé,a)}),Array.from(t.values()).map(e=>{e.sort((e,t)=>e["Ref. produit"].length-t["Ref. produit"].length);let t={...e[0]};return e.length>1&&(t.subProducts=e.slice(1),t.subProductCount=e.length-1,["Total Stock","Stock Frimoda","Stock Casa","Stock Rabat","Stock Marrakech","Stock Tanger"].forEach(a=>{t[a]=e.reduce((e,t)=>e+(Number(t[a])||0),0)})),t})};function I(){var e,t;let[a,l]=(0,i.useState)(F[0].name),[r,n]=(0,i.useState)(""),[o,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(!1),[m,x]=(0,i.useState)(null),[p,L]=(0,i.useState)([]),[K,_]=(0,i.useState)([]),I=(0,i.useRef)(null),[V,W]=(0,i.useState)(""),[G,H]=(0,i.useState)([]),[J,Y]=(0,i.useState)(null),[X,Z]=(0,i.useState)([]),[Q,$]=(0,i.useState)({}),[ee,et]=(0,i.useState)({}),[ea,es]=(0,i.useState)(0),[el,er]=(0,i.useState)(0),[ei,en]=(0,i.useState)(0),[eo,ec]=(0,i.useState)(null),[ed,eu]=(0,i.useState)(null),[em,ex]=(0,i.useState)(!1),[ep,eh]=(0,i.useState)(!1),[ef,eg]=(0,i.useState)(!1),eb=(0,i.useRef)(null),[ev,ey]=(0,T.Z)("ceramicCatalogueData",{items:[],lastFetched:0}),[ej,ew]=(0,T.Z)("tissueCatalogueData",{items:[],lastFetched:0}),[eN,ek]=(0,i.useState)(!1),eC=(0,i.useRef)(null),[eS,eR]=(0,i.useState)({x:0,y:0});(0,i.useEffect)(()=>{let e=()=>{eC.current&&ek(eC.current.getBoundingClientRect().bottom<0)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let eE=async(e,t)=>{try{let a=await fetch("https://stockfinder.sketchdesign.ma/data.php?type=".concat(e,"&query=").concat(encodeURIComponent(t)));if(!a.ok)throw Error("Network response was not ok");let s=await a.json();if(console.log("Received data:",s),Array.isArray(s)){let e=s.map(e=>({...e,"Ref. produit":e["Ref. produit"]||e.ref||e["Ref produit"]||""}));L(e),_(e)}else s.error&&(console.error("API Error:",s.error),L([]),_([]))}catch(e){console.error("Fetch error:",e),L([]),_([])}};(0,i.useEffect)(()=>{eE("category",a)},[a]),(0,i.useEffect)(()=>{if(r){let e=r.toLowerCase(),t=B(p.filter(t=>t["Ref. produit"].toLowerCase().includes(e)||t["Libell\xe9"].toLowerCase().includes(e)));Z(t),_(t)}else{let e=B(p);Z(e),_(e)}},[r,p]),(0,i.useEffect)(()=>{Z(B(K))},[K]);let ez=(0,i.useCallback)(e=>e&&e.column.columnDef.cell&&"function"==typeof e.column.columnDef.cell?(0,k.ie)(e.column.columnDef.cell,e):null,[]),eP=(0,k.b7)({data:X,columns:U,getCoreRowModel:(0,C.sC)(),onSortingChange:c,getSortedRowModel:(0,C.tj)(),getExpandedRowModel:(0,C.rV)(),onExpandedChange:e=>{$(t=>"function"==typeof e?e(t):e)},state:{sorting:o,expanded:Q}});(0,i.useEffect)(()=>{let e=e=>{I.current&&!I.current.contains(e.target)&&u(!1)};return d&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let eT=F.find(e=>e.name===a),eL=async(e,t)=>{try{let a=await fetch("https://docs.google.com/spreadsheets/d/".concat(e,"/gviz/tq?tqx=out:json")),s=await a.text();return JSON.parse(s.substr(47).slice(0,-2)).table.rows.slice(1).map(e=>{var a,s,l,r,i,n,o,c,d,u,m,x;return t?{ref:(null===(s=e.c[0])||void 0===s?void 0:null===(a=s.v)||void 0===a?void 0:a.toString())||"","image url":(null===(r=e.c[1])||void 0===r?void 0:null===(l=r.v)||void 0===l?void 0:l.toString())||"",availability:(null===(i=e.c[2])||void 0===i?void 0:i.v)==="yes"?"yes":"no"}:{ref:(null===(o=e.c[0])||void 0===o?void 0:null===(n=o.v)||void 0===n?void 0:n.toString())||"",color:(null===(d=e.c[1])||void 0===d?void 0:null===(c=d.v)||void 0===c?void 0:c.toString())||"","image url":(null===(m=e.c[2])||void 0===m?void 0:null===(u=m.v)||void 0===u?void 0:u.toString())||"",availability:(null===(x=e.c[3])||void 0===x?void 0:x.v)==="yes"?"yes":"no"}})}catch(e){return console.error("Error fetching catalogue data:",e),[]}};(0,i.useEffect)(()=>{(async()=>{(null==eT?void 0:eT.catalogue)==="ceramique"?(Date.now()-((null==ev?void 0:ev.lastFetched)||0)>36e5&&ey({items:await eL("1VJs3bTDNFpdw88j5XYXxbiakzT2r5yuu4yRi7FjozSQ",!1),lastFetched:Date.now()}),H((null==ev?void 0:ev.items)||[])):(null==eT?void 0:eT.catalogue)==="tissues"&&(Date.now()-((null==ej?void 0:ej.lastFetched)||0)>36e5&&ew({items:await eL("1J9-7o_xOC2g-aLJfBdYru5qMh4UbOztgWSdjaeRtnX8",!0),lastFetched:Date.now()}),H((null==ej?void 0:ej.items)||[]))})()},[eT,ev,ej,ey,ew]);let eA=e=>{let t=e.toLowerCase();return(null==eT?void 0:eT.catalogue)==="ceramique"?G.find(e=>{let a=e.ref.toLowerCase();return t.includes(a)}):G.find(e=>t.includes(e.ref.toLowerCase()))},eD=G.filter(e=>e.ref.toLowerCase().includes(V.toLowerCase())||e.color&&e.color.toLowerCase().includes(V.toLowerCase())),eF=e=>{let{item:t}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 cursor-pointer w-20",onClick:()=>Y(t),children:[(0,s.jsx)("div",{className:"w-16 h-16 mb-1 relative flex-shrink-0",children:(0,s.jsx)(D,{src:t["image url"],alt:t.color||t.ref,layout:"fill",objectFit:"cover",className:"rounded-sm"})}),(0,s.jsx)("p",{className:"text-[10px] font-medium truncate w-full text-center",children:t.color||t.ref}),(0,s.jsx)("span",{className:"text-[8px] font-medium px-1 py-0.5 rounded-full ".concat("yes"===t.availability?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"yes"===t.availability?"EN STOCK":"\xc9PUIS\xc9"})]})},eK=e=>{let t=e["Libell\xe9"].replace(/,/g,"").trim(),s=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),l=s(t),r=F.find(e=>e.name===a);if(!r)return{productName:t,category:"",dimensions:""};let i="",n=t,o="";if(r.name.startsWith("Canap\xe9")){let e=l.indexOf("canape");-1!==e&&(i="Canap\xe9",n=t.slice(0,e).trim(),o=t.slice(e+6).trim())}else if("Miroirs"===r.name){let e=l.indexOf("miroir");-1!==e&&(i="Miroirs",n=t.slice(0,e).trim(),o=t.slice(e+6).trim())}else{let e=s(r.name);if(l.includes(e)){i=r.name;let a=l.indexOf(e);n=t.slice(0,a).trim(),o=t.slice(a+r.name.length).trim()}}return{productName:n.trim(),category:i.trim(),dimensions:o.trim()}},eO=async e=>{if(e){eg(!0),ex(!0);try{let{productName:t,category:a,dimensions:s}=eK(e),l=await M(e["Ref. produit"]);x({...e,processedName:t,processedCategory:a,processedDimensions:s,imageUrl:l||void 0})}catch(e){console.error("Error setting selected product:",e)}finally{ex(!1)}}else x(null),eg(!1)},e_=()=>{eg(!1),x(null)},eU=()=>{Y(null),eh(!1)};function eM(e){return"accessorKey"in e}let eq=(0,i.useCallback)(e=>{let t={};e.forEach(e=>{let a=e["Cat\xe9gorie"]||"Uncategorized";t[a]=(t[a]||0)+1}),et(t)},[]);(0,i.useEffect)(()=>{eq(p)},[p,eq]),(0,i.useEffect)(()=>{let e=K.filter(e=>e["Total Stock"]>0).length,t=K.filter(e=>e["Total Stock"]<=0).length,a=K.length;es(e),er(t),en(a)},[K]);let eB=e=>{e.stopPropagation(),ec(null)};return(0,i.useEffect)(()=>{m&&(()=>{if(eb.current&&m){let e=20;for(eb.current.style.fontSize="".concat(e,"px");eb.current.scrollHeight>eb.current.clientHeight&&e>10;)e--,eb.current.style.fontSize="".concat(e,"px")}})()},[m]),(0,s.jsxs)("div",{className:"flex h-screen bg-gray-100 font-sans uppercase",children:[(0,s.jsxs)("div",{ref:I,className:"fixed inset-y-0 left-0 z-50 w-48 bg-[#0156B3] text-white shadow-lg transform ".concat(d?"translate-x-0":"-translate-x-full"," transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 flex flex-col"),children:[(0,s.jsx)("div",{className:"bg-[#0156B3] z-20 p-3 shadow-md",children:(0,s.jsx)(D,{src:"https://stockfinder.sketchdesign.ma/sketch.svg",alt:"Stock Finder Logo",width:120,height:40,className:"w-full h-auto"})}),(0,s.jsx)("nav",{className:"flex-1 overflow-y-auto py-2 px-1",children:F.map(e=>(0,s.jsxs)(h,{variant:a===e.name?"secondary":"ghost",className:"w-full justify-between mb-1 text-left hover:bg-white hover:text-[#0156B3] transition-colors duration-300 text-[11px] py-1 px-2 rounded-md font-bold",onClick:()=>{l(e.name),u(!1)},children:[(0,s.jsx)("span",{children:e.name.toUpperCase()}),void 0!==ee[e.name]&&(0,s.jsx)("span",{className:"bg-white text-[#0156B3] text-[9px] px-1.5 py-0.5 rounded-full",children:ee[e.name]})]},e.name))})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[(0,s.jsx)("div",{className:"lg:hidden bg-[#0156B3] text-white px-2 sm:px-4 py-2 sm:py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h,{variant:"ghost",size:"icon",onClick:()=>u(!d),className:"text-white p-1",children:(0,s.jsx)(S.cur,{className:"h-5 w-5 sm:h-6 sm:w-6"})}),(0,s.jsx)("h1",{className:"text-xs sm:text-sm font-bold truncate max-w-[120px] sm:max-w-[160px]",children:a.toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-green-500 text-white rounded-full whitespace-nowrap text-[8px] sm:text-[10px]",children:["En stock: ",ea]}),(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-red-500 text-white rounded-full whitespace-nowrap text-[8px] sm:text-[10px]",children:["En rupture: ",el]}),(0,s.jsxs)("span",{className:"px-1 py-0.5 bg-blue-100 text-blue-800 rounded-full whitespace-nowrap text-[8px] sm:text-[10px]",children:["Total: ",ei]})]})]})}),eN&&(0,s.jsx)(A(),{position:eS,onDrag:(e,t)=>{eR({x:t.x,y:t.y})},bounds:"parent",children:(0,s.jsx)("div",{className:"fixed z-50",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-full shadow-lg",children:[(0,s.jsx)(f,{type:"text",inputMode:"text",placeholder:"Search...",value:r,onChange:e=>n(e.target.value),className:"w-64 pl-8 pr-3 py-1 text-sm rounded-full no-zoom",style:{fontSize:"14px",transform:"scale(1)",transformOrigin:"left top"}}),(0,s.jsx)(S.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:14})]})})}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[(null==eT?void 0:eT.catalogue)&&(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"tissues"===eT.catalogue?"TISSUS":"C\xc9RAMIQUES"}),(0,s.jsxs)("div",{className:"relative w-full max-w-[120px] sm:max-w-xs",children:[(0,s.jsx)(f,{type:"text",inputMode:"text",placeholder:"Recherche r\xe9f/couleur",value:V,onChange:e=>W(e.target.value),className:"w-full pl-6 pr-2 py-1 text-xs sm:text-sm rounded-full no-zoom",style:{fontSize:"16px",transform:"scale(1)",transformOrigin:"left top"}}),(0,s.jsx)(S.jRj,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400",size:12})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("div",{className:"flex space-x-2",style:{minWidth:"max-content"},children:eD.map((e,t)=>(0,s.jsx)(eF,{item:e},e.ref+t))})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg",children:[(0,s.jsx)("div",{className:"bg-white rounded-t-xl",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center sm:items-start sm:space-y-0 p-2",children:[(0,s.jsxs)("div",{className:"hidden lg:flex flex-wrap gap-2 text-[11px] mb-2 sm:mb-0",children:[(0,s.jsxs)("span",{className:"px-2 py-1 bg-green-500 text-white rounded-full whitespace-nowrap",children:["En stock: ",ea]}),(0,s.jsxs)("span",{className:"px-2 py-1 bg-red-500 text-white rounded-full whitespace-nowrap",children:["En rupture: ",el]}),(0,s.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full whitespace-nowrap",children:["Total produits: ",ei]})]}),(0,s.jsxs)("div",{className:"flex w-full sm:w-auto items-center space-x-2",ref:eC,children:[(0,s.jsxs)("div",{className:"relative flex-grow sm:flex-grow-0 sm:w-64",children:[(0,s.jsx)(f,{type:"text",inputMode:"text",placeholder:"Search by R\xe9f. or Libell\xe9",className:"pl-10 pr-4 py-2 w-full transition-shadow duration-300 focus:shadow-md no-zoom",value:r,onChange:e=>n(e.target.value),style:{fontSize:"16px",transform:"scale(1)",transformOrigin:"left top"}}),(0,s.jsx)(S.jRj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),(0,s.jsxs)(h,{onClick:()=>{let e=R.P6.json_to_sheet(K),t=R.P6.book_new();R.P6.book_append_sheet(t,e,"Products"),R.NC(t,"stock_finder_export.xlsx")},className:"hidden sm:flex bg-[#0156B3] hover:bg-[#0167D3] text-white transition-colors duration-300 font-bold",children:[(0,s.jsx)(S._hL,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,s.jsxs)("div",{className:"overflow-x-auto",children:[(0,s.jsxs)(g,{className:"hidden lg:table w-full text-xs",children:[(0,s.jsx)(b,{className:"bg-gray-200",children:eP.getHeaderGroups().map(e=>(0,s.jsx)(y,{children:e.headers.map(e=>{var t;return(0,s.jsx)(j,{className:"font-bold ".concat(0===e.index||1===e.index?"text-left":"text-center"," ").concat((null===(t=e.column.columnDef.meta)||void 0===t?void 0:t.headerClassName)||""),children:e.isPlaceholder?null:(0,k.ie)(e.column.columnDef.header,e.getContext())},e.id)})},e.id))}),(0,s.jsx)(v,{children:eP.getRowModel().rows.map(e=>(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(y,{className:"".concat(e.index%2==0?"bg-white":"bg-gray-100"," hover:bg-blue-50 transition-all duration-200 ").concat(e.getIsExpanded()?"bg-blue-100 shadow-md z-10 relative":""),children:e.getVisibleCells().map(t=>{var a,l;return(0,s.jsx)(w,{className:"".concat((null===(a=t.column.columnDef.meta)||void 0===a?void 0:a.className)||""," ").concat((null===(l=t.column.id)||void 0===l?void 0:l.startsWith("Stock"))?"border-l border-gray-200":""),children:(0,s.jsx)("div",{className:"".concat("Ref. produit"===t.column.id?"text-left":"text-center cursor-pointer"),onClick:()=>{"Ref. produit"!==t.column.id&&eO(e.original)},children:t.column.columnDef.cell?ez(t.getContext()):null})},t.id)})}),e.getIsExpanded()&&e.original.subProducts&&e.original.subProducts.map((t,a)=>{var l,r;return(0,s.jsx)(y,{className:"bg-blue-50 hover:bg-blue-200 transition-colors duration-200 cursor-pointer ".concat(a===(null!==(r=null===(l=e.original.subProducts)||void 0===l?void 0:l.length)&&void 0!==r?r:0)-1?"shadow-md":""),onClick:()=>eO(t),children:U.map((e,l)=>{var r,i;return(0,s.jsx)(w,{className:"".concat(0===l?"text-left":"text-center"," ").concat((null===(r=e.meta)||void 0===r?void 0:r.className)||""," ").concat((null===(i=e.id)||void 0===i?void 0:i.startsWith("Stock"))?"border-l border-gray-200":""),children:(0,s.jsx)("div",{className:"".concat(0===l?"pl-6":""),children:0===l?(0,s.jsxs)("span",{className:"text-xs text-blue-600",children:["└ ",t["Ref. produit"]]}):e.cell&&"function"==typeof e.cell?(0,k.ie)(e.cell,{getValue:()=>eM(e)?t[e.accessorKey]:void 0,renderValue:()=>eM(e)?t[e.accessorKey]:void 0,row:{original:t,index:a,id:t["Ref. produit"],depth:1,subRows:[]},column:e,table:eP}):null})},e.id)})},t["Ref. produit"])})]},e.id))})]}),(0,s.jsxs)(g,{className:"lg:hidden w-full text-xs",children:[(0,s.jsx)(b,{children:(0,s.jsx)(y,{children:O.map(e=>(0,s.jsx)(j,{className:"font-bold text-left",children:e.header},e.accessorKey))})}),(0,s.jsx)(v,{children:X.map((e,t)=>(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(y,{className:"".concat(t%2==0?"bg-white":"bg-gray-100"," hover:bg-blue-50 transition-all duration-200 cursor-pointer"),onClick:()=>eO(e),children:O.map(t=>(0,s.jsx)(w,{children:"Ref. produit"===t.accessorKey?(0,s.jsxs)("div",{className:"flex items-center",children:[e.subProducts&&(0,s.jsx)(h,{variant:"outline",size:"sm",className:"mr-2 p-0 w-6 h-6 rounded-full",onClick:t=>{t.stopPropagation(),$(t=>({...t,[e["Ref. produit"]]:!t[e["Ref. produit"]]}))},children:Q[e["Ref. produit"]]?(0,s.jsx)(S.ego,{className:"w-4 h-4"}):(0,s.jsx)(S.OvN,{className:"w-4 h-4"})}),(0,s.jsx)("span",{children:e[t.accessorKey]})]}):t.cell?t.cell({row:{original:e}}):e[t.accessorKey]},t.accessorKey))}),Q[e["Ref. produit"]]&&e.subProducts&&e.subProducts.map((e,a)=>(0,s.jsx)(y,{className:"".concat((t+a+1)%2==0?"bg-blue-50":"bg-blue-100"," hover:bg-blue-200 transition-colors duration-200 cursor-pointer"),onClick:()=>eO(e),children:O.map(t=>(0,s.jsx)(w,{className:"pl-6",children:t.cell?t.cell({row:{original:e}}):e[t.accessorKey]},t.accessorKey))},e["Ref. produit"]))]},e["Ref. produit"]))})]})]})]})]})]}),(0,s.jsx)(N.fC,{open:ef,onOpenChange:e_,children:(0,s.jsxs)(N.h_,{children:[(0,s.jsx)(N.aV,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"}),(0,s.jsx)(E.M,{children:ef&&(0,s.jsx)(N.VY,{className:"fixed inset-0 flex items-center justify-center z-[60]",onClick:e_,children:(0,s.jsxs)(z.E.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-2xl w-[95vw] sm:w-[90vw] max-w-[450px] overflow-hidden flex flex-col max-h-[90vh]",onClick:e=>e.stopPropagation(),children:[em?(0,s.jsx)("div",{className:"h-64 flex items-center justify-center",children:(0,s.jsx)(P,{size:"large"})}):m?(0,s.jsxs)("div",{className:"product-modal-content relative flex-grow flex flex-col overflow-auto",children:[(0,s.jsx)(N.Dx,{className:"sr-only",children:"Product Details"}),(0,s.jsx)(N.dk,{className:"sr-only",children:"Detailed information about the selected product"}),(0,s.jsxs)("div",{className:"bg-blue-600 p-4 rounded-t-2xl",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-between mb-2",children:(0,s.jsxs)("div",{className:"flex-grow flex items-center space-x-2 mr-8",children:[" ",(0,s.jsx)(z.E.h2,{className:"text-2xl font-bold text-white truncate",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:null===(e=m.processedName)||void 0===e?void 0:e.toUpperCase()}),m.processedDimensions&&(0,s.jsx)(z.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,s.jsx)("div",{className:"bg-[#ffed00] py-1 px-2 transform skew-x-[-20deg] shadow-lg",children:(0,s.jsx)("p",{className:"text-sm font-bold text-black transform skew-x-[20deg] inline-block",children:m.processedDimensions.toUpperCase()})})})]})}),(0,s.jsxs)(z.E.div,{className:"flex items-center gap-2 mt-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[(0,s.jsx)("span",{className:"text-sm text-blue-100",children:(null===(t=m["Ref. produit"])||void 0===t?void 0:t.toUpperCase())||"N/A"}),m.processedCategory&&(0,s.jsx)("span",{className:"inline-block bg-blue-500 text-white text-xs px-2 py-0.5 rounded-full",children:m.processedCategory.toUpperCase()})]})]}),(0,s.jsxs)("div",{className:"relative h-64 bg-white",children:[(0,s.jsx)(D,{src:m.imageUrl||"https://via.placeholder.com/400x300?text=No+Image",alt:m["Libell\xe9"],layout:"fill",objectFit:"contain",className:"rounded-t-2xl",quality:75,placeholder:"blur",blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="}),(0,s.jsx)(z.E.div,{className:"absolute bottom-4 right-4 overflow-visible z-10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{type:"spring",stiffness:100,delay:.2},children:(0,s.jsx)("div",{className:"bg-[#ffed00] py-1 px-4 transform skew-x-[-20deg] shadow-lg",children:(0,s.jsxs)("p",{className:"text-xl font-bold text-black transform skew-x-[20deg] inline-block",children:[m["Prix Promo"].toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," ",(0,s.jsx)("span",{className:"text-xl",children:"DH"})]})})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-4 bg-blue-50",children:[(()=>{let{smallSrc:e,label:t,isCeramic:a}=q(m,eT),l=eA(m["Ref. produit"]);return(0,s.jsxs)("div",{className:"space-y-3",children:[t&&(0,s.jsxs)(z.E.div,{className:"bg-blue-100 p-3 rounded-lg flex items-center justify-between",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,type:"spring"},children:[(0,s.jsx)("span",{className:"text-base font-semibold text-blue-700",children:"Orientation:"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(z.E.span,{className:"text-base font-bold px-3 py-1 rounded-full ".concat("Gauchier"===t?"bg-purple-500 text-white":"bg-orange-500 text-white"),whileHover:{scale:1.05},whileTap:{scale:.95},children:t}),e&&(0,s.jsx)(z.E.div,{className:"w-14 h-14 relative",whileHover:{scale:1.1},transition:{duration:.3},children:(0,s.jsx)(D,{src:e,alt:"Orientation Image",layout:"fill",objectFit:"contain",style:{transform:"Gauchier"===t?"scaleX(-1)":void 0}})})]})]}),l&&(0,s.jsxs)("div",{className:"bg-blue-100 p-3 rounded-lg flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-base font-semibold text-blue-700",children:[a?"C\xe9ramique":"Tissu",":"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 relative cursor-pointer",onClick:()=>eu({src:l["image url"],alt:l.color||l.ref}),children:(0,s.jsx)(D,{src:l["image url"],alt:l.color||l.ref,layout:"fill",objectFit:"cover",className:"rounded-md"})}),(0,s.jsx)("span",{className:"text-base font-bold text-blue-600",children:l.color||l.ref}),!a&&(0,s.jsx)("span",{className:"text-sm font-bold px-2 py-1 rounded-full ".concat("yes"===l.availability?"bg-green-500 text-white":"bg-red-500 text-white"),children:"yes"===l.availability?"EN STOCK":"\xc9PUIS\xc9"})]})]})]})})(),(0,s.jsxs)("div",{className:"bg-blue-100 p-3 rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)(z.E.div,{className:"bg-blue-600 p-2 rounded-lg mb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:0,type:"spring"},children:[(0,s.jsx)("p",{className:"text-sm font-bold text-blue-100 text-center uppercase",children:"SKE"}),(0,s.jsx)("p",{className:"text-xl font-bold text-white text-center",children:m["Stock Frimoda"]})]}),(0,s.jsx)("div",{className:"flex justify-between items-stretch space-x-2",children:[{city:"Casa",color:"bg-teal-500"},{city:"Rabat",color:"bg-amber-500"},{city:"Marrakech",color:"bg-rose-500"},{city:"Tanger",color:"bg-indigo-500"}].map((e,t)=>{let{city:a,color:l}=e,r=m["Stock ".concat(a)],i=0===r;return(0,s.jsxs)(z.E.div,{className:"".concat(l," ").concat(i?"opacity-50":""," p-2 rounded-lg flex-grow flex flex-col justify-between relative overflow-hidden"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:(t+1)*.1,type:"spring"},children:[(0,s.jsx)("p",{className:"text-xs font-bold text-white text-center uppercase",children:a}),(0,s.jsx)("p",{className:"text-xl font-bold text-center text-white uppercase",children:"number"==typeof r?r:""})]},a)})})]})]})]}):null,(0,s.jsx)(N.x8,{asChild:!0,children:(0,s.jsx)(h,{className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full transition-colors duration-200",variant:"ghost",size:"icon",onClick:e=>{e.stopPropagation(),e_()},children:(0,s.jsx)(S.q5L,{className:"h-6 w-6"})})}),ed&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-10",onClick:()=>eu(null),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(D,{src:ed.src,alt:ed.alt,width:300,height:300,objectFit:"cover",className:"rounded-lg"}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),eu(null)},className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-1 transition-colors duration-200",children:(0,s.jsx)(S.q5L,{className:"h-4 w-4"})})]})})]})})})]})}),(0,s.jsx)(N.fC,{open:!!J,onOpenChange:eU,children:(0,s.jsxs)(N.h_,{children:[(0,s.jsx)(N.aV,{className:"fixed inset-0 bg-black/50 opacity-0 data-[state=open]:opacity-100 transition-opacity duration-300 z-50"}),(0,s.jsx)(E.M,{children:J&&(0,s.jsx)(N.VY,{className:"fixed inset-0 flex items-center justify-center z-[60]",onClick:eU,children:(0,s.jsxs)(z.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-white rounded-lg shadow-lg w-[90vw] sm:w-[400px] md:w-[500px] lg:w-[600px] h-[80vh] sm:h-[90vh] max-h-[600px] overflow-hidden flex flex-col relative",onClick:e=>e.stopPropagation(),children:[ep?(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsx)(P,{size:"large"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"relative flex-grow",children:(0,s.jsx)(D,{src:J["image url"],alt:J.ref,layout:"fill",objectFit:"cover",className:"z-0"})}),(0,s.jsxs)("div",{className:"bg-white bg-opacity-90 p-4 flex flex-col sm:flex-row justify-between items-start sm:items-center z-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:J.color?J.color.toUpperCase():J.ref.toUpperCase()}),J.color&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:J.ref.toUpperCase()})]}),(0,s.jsx)("span",{className:"mt-2 sm:mt-0 px-3 py-1 rounded-full text-sm font-semibold ".concat("yes"===J.availability?"bg-green-500 text-white":"bg-red-500 text-white"),children:"yes"===J.availability?"EN STOCK":"\xc9PUIS\xc9"})]})]}),(0,s.jsx)(N.x8,{asChild:!0,children:(0,s.jsx)(h,{className:"absolute top-2 right-2 bg-white/50 hover:bg-white/70 text-gray-800 z-20",variant:"ghost",size:"icon",children:(0,s.jsx)(S.q5L,{className:"h-4 w-4"})})})]})})})]})}),(0,s.jsx)(E.M,{children:eo&&(0,s.jsx)(z.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:eB,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[70] flex items-center justify-center",children:(0,s.jsxs)(z.E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-lg p-2 shadow-xl relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(D,{src:eo.src,alt:eo.alt,width:300,height:300,objectFit:"cover",className:"rounded-lg"}),(0,s.jsx)("button",{onClick:eB,className:"absolute top-2 right-2 bg-white/80 hover:bg-white text-gray-800 rounded-full p-1 transition-colors duration-200",children:(0,s.jsx)(S.q5L,{className:"h-4 w-4"})})]})})})]})}let V='\n  .no-zoom {\n    font-size: 16px !important;\n  }\n  input[type="text"], input[type="number"], textarea {\n    font-size: 16px !important;\n  }\n  @media screen and (-webkit-min-device-pixel-ratio:0) { \n    select,\n    textarea,\n    input {\n      font-size: 16px !important;\n    }\n  }\n  input:focus, textarea:focus, select:focus {\n    font-size: 16px !important;\n  }\n  * {\n    touch-action: manipulation;\n  }\n  @supports (-webkit-touch-callout: none) {\n    input, select, textarea {\n      font-size: 16px !important;\n    }\n  }\n',W=(0,s.jsx)(r(),{id:V.__hash,children:V});var G=function(){return(0,s.jsxs)(s.Fragment,{children:[W,(0,s.jsx)(I,{})]})};function H(){return(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"Your Page Title"}),(0,s.jsx)(G,{})]})}},67:function(){},2061:function(){}},function(e){e.O(0,[251,130,666,888,774,179],function(){return e(e.s=7209)}),_N_E=e.O()}]);